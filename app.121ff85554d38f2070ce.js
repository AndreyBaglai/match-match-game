(()=>{"use strict";var e,t,n={309:(e,t,n)=>{n.r(t)},95:(e,t,n)=>{n.r(t)},85:(e,t,n)=>{n.r(t)},76:(e,t,n)=>{n.r(t)},80:(e,t,n)=>{n.r(t)},311:(e,t,n)=>{n.r(t)},945:(e,t,n)=>{n.r(t)},526:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},467:(e,t,n)=>{n.r(t)},57:(e,t,n)=>{n.r(t)},268:(e,t,n)=>{n.r(t)},580:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var i=n(583),a=n(977),s=n(286),c=n(229),l=n(957),u=n(368),p=n(81),d=function(){function e(e){var t=this;this.rootElement=e,this.main=new i.Main,this.header=new a.Header,this.router=new l.Router,this.game=new c.Game,this.form=new u.Form,this.popup=new p.CongratulationsPopup,this.rootElement.prepend(this.header.element),this.rootElement.appendChild(this.main.element),this.rootElement.appendChild(this.form.element),this.rootElement.appendChild(this.popup.element),l.Router.setDefaultRoute(this.main.element),window.onpopstate=function(){t.game.finishGame(),t.router.setRoute(t.main.element)},this.rootElement.addEventListener("click",(function(e){var n=e.target;"registerNewPlayer"===n.id&&u.Form.showForm(),"newGameBtn"===n.id&&(t.game.finishGame(),t.main.element.innerHTML="",t.main.element.appendChild(t.game.element),t.start()),"stopGameBtn"===n.id&&(c.Game.isStoppedGame?(t.game.continueGame(),a.Header.changeStopGameTextBtn("Stop Game")):(t.game.stopGame(),a.Header.changeStopGameTextBtn("Continue Game")))}))}return e.prototype.start=function(){return r(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:return[4,fetch("./images.json")];case 1:return[4,r.sent().json()];case 2:return e=r.sent(),t=e[0],e.forEach((function(e){e.category===s.GameSettings.settings.category&&(t=e)})),n=t.images.filter((function(e,t){return t<s.GameSettings.settings.difficulty})).map((function(e){return t.category+"/"+e})),this.game.newGame(n),[2]}}))}))},e}();t.App=d},366:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGame=void 0;var i=n(427);n(309);var a=function(e){function t(){var n=e.call(this,"div",["about-game"])||this;return n.element.prepend(t.renderTitle()),n.element.appendChild(t.renderListRules()),n}return o(t,e),t.renderTitle=function(){var e=document.createElement("h2");return e.classList.add("title"),e.innerText="How to play?",e},t.renderListRules=function(){var e=document.createElement("ul");return e.classList.add("game-rules"),e.appendChild(t.renderRule("Register new player in game",1)),e.appendChild(t.renderRule("Configure your game settings",2)),e.appendChild(t.renderRule("Start you new game! Remember card positions and match it before times up.",3)),e},t.renderRule=function(e,t){var n=document.createElement("li");return n.classList.add("rule"),n.innerHTML='\n      <span class="rule-number">'+t+'</span>\n      <p class="rule-text">\n        '+e+"\n      </p>\n    ",n},t}(i.BaseComponent);t.AboutGame=a},427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0;t.BaseComponent=function(e,t){var n;void 0===e&&(e="div"),void 0===t&&(t=[]),this.element=document.createElement(e),(n=this.element.classList).add.apply(n,t)}},186:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BestScore=void 0;var i=n(427),a=n(59);n(95);var s=function(e){function t(){var n=e.call(this,"div",["best-score"])||this;return n.players=a.Database.data,n.element.prepend(t.renderTitle()),n.element.appendChild(n.renderListPlayers()),n}return o(t,e),t.renderTitle=function(){var e=document.createElement("h2");return e.classList.add("title"),e.innerText="Best players",e},t.prototype.renderListPlayers=function(){var e=document.createElement("ul");return e.classList.add("players"),this.players.length?(e.innerHTML="",this.players.forEach((function(n){e.appendChild(t.renderPlayer(n))}))):e.innerHTML="<li>No results. Your can be first.</li>",e},t.renderPlayer=function(e){var t=document.createElement("li");return t.classList.add("players-item"),t.innerHTML='\n      <div class="player">\n        <div class="player-img"></div>\n        <div class="player-info">\n          <h4>'+e.firstName+" "+e.lastName+"</h4>\n          <p>"+e.email+'</p>\n        </div>\n      </div>\n      <div class="player-score">\n        <p>Score: <span class="score-number">'+e.score+"</span></p>\n      </div>\n    ",t},t}(i.BaseComponent);t.BestScore=s},113:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i=n(427);n(85);var a=function(e){function t(t,n,r){var o=e.call(this,"button",["btn",n])||this;return o.element.id=r,o.element.innerText=t,o}return o(t,e),t}(i.BaseComponent);t.Button=a},343:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;var i=n(678),a=n(427);n(76);var s=function(e){function t(t){var n=e.call(this,"div",["card-container"])||this;return n.image=t,n.isFlipped=!1,n.element.innerHTML='\n      <div class="card">\n        <div class="card__front" style="background-image: url(./images/'+t+')"></div>\n        <div class="card__back"></div>\n        <div class="red-bg"></div>\n        <div class="green-bg"></div>\n      </div>\n    ',n}return o(t,e),t.prototype.flipToBack=function(){return this.isFlipped=!0,this.flip(!0)},t.prototype.flipToFront=function(){return this.isFlipped=!1,this.flip(!1)},t.prototype.flip=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n){t.element.classList.toggle(i.FLIP_CLASS,e),t.element.addEventListener("transitionend",(function(){return n()}),{once:!0})}))},t}(a.BaseComponent);t.Card=s},610:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0;var i=n(427),a=n(678);n(80);var s=function(e){function t(){var t=e.call(this,"div",["cards-field"])||this;return t.cards=[],t}return o(t,e),t.prototype.clear=function(){this.cards=[],this.element.innerHTML=""},t.prototype.addCards=function(e){var t=this;this.cards=e,this.cards.forEach((function(e){return t.element.appendChild(e.element)})),setTimeout((function(){t.cards.forEach((function(e){return e.flipToBack()}))}),a.START_SHOW_TIME_CARDS)},t}(i.BaseComponent);t.CardsField=s},81:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CongratulationsPopup=void 0;var i=n(427),a=n(957);n(311);var s=function(e){function t(){var n=e.call(this,"div",["popup-bg"])||this;return n.element.innerHTML='\n      <div class="popup">\n        <p>Congratulation! Your game is over.</p>\n        <a href="#score" class="btn btn__blue">Ok</a>\n      </div>     \n    ',n.element.addEventListener("click",(function(e){var n=document.querySelector(".popup-bg"),r=e.target;n&&r.classList.contains("btn__blue")&&(t.close(),a.Router.setBestScoreRoute(document.querySelector("main")))})),n}return o(t,e),t.show=function(){var e=document.querySelector(".popup-bg");e&&(e.style.display="block")},t.close=function(){var e=document.querySelector(".popup-bg");e&&(e.style.display="none")},t}(i.BaseComponent);t.CongratulationsPopup=s},59:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;var r=n(678),o=function(){function e(){}return e.createDB=function(){var t=indexedDB.open(r.DATABASE_NAME,r.DATABASE_VERSION);t.onupgradeneeded=function(t){var n=t.target;n&&(e.db=n.result),e.db.createObjectStore("players",{keyPath:"id"})},t.onsuccess=function(t){var n=t.target;n&&(e.db=n.result),e.getTopPlayers()}},e.addPlayer=function(t){var n=e.db.transaction("players","readwrite");n.onerror=function(){return!1},n.objectStore("players").add(t),e.getTopPlayers()},e.getTopPlayers=function(){e.db.transaction("players","readonly").objectStore("players").getAll(null,r.MAX_PLAYERS).onsuccess=function(t){var n=t.target;n&&(e.data=n.result.sort((function(e,t){return t.score-e.score})))}},e.setScorePlayer=function(t,n){var r=e.db.transaction("players","readwrite").objectStore("players");r.get(n).onsuccess=function(e){var n=e.target;if(n){var o=n.result;o.score=t,r.put(o)}}},e}();t.Database=o},368:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var i=n(427),a=n(977),s=n(59);n(945);var c=n(678),l=function(e){function t(){var n=e.call(this,"div",["form-bg"])||this;return n.element.innerHTML='\n      <form class="form" onsubmit="return false">\n        <h2 class="form-title">Register new Player</h2>\n        <div class="form-container">\n          <div class="form-elements">\n            '+t.renderFirstNameField()+"\n            "+t.renderLastNameField()+"\n            "+t.renderEmailField()+'\n          </div>\n          <div class="form-img"></div>\n        </div>\n        '+t.renderFormButtons()+"\n      </form>\n    ",n.element.addEventListener("click",(function(e){var n=document.querySelector(".form-bg"),r=e.target;r.classList.contains("form-bg")&&n?t.close():(r.classList.contains("btn__blue")&&n&&t.addNewPlayer(n),r.classList.contains("btn__light-blue")&&n&&t.close())})),n}return o(t,e),t.showForm=function(){var e=document.querySelector(".form-bg");e&&(e.style.display="block")},t.close=function(){document.querySelector(".form-bg").style.display="none"},t.addNewPlayer=function(e){var n="",r="",o="",i=!1,c=!1,l=!1,u=document.getElementById("firstName"),p=document.getElementById("lastName"),d=document.getElementById("email");if(u&&u.checkValidity()&&(n=u.value,i=!0),p&&p.checkValidity()&&(r=p.value,c=!0),d&&d.checkValidity()&&(o=d.value,l=!0),i&&c&&l){var f=Math.random();t.currentPlayerId=f;var m={id:f,firstName:n,lastName:r,email:o,score:0};s.Database.addPlayer(m),a.Header.setActiveUser(),e&&t.close()}},t.renderFirstNameField=function(){return'\n      <div class="form-field">\n        <label for="firstName">First name</label>\n        <input \n          class="input" \n          type="text" \n          id="firstName" \n          placeholder="first name" \n          maxlength="30" \n          required \n          pattern='+c.FIRST_NAME_PATTERN+' \n          title="Please, type correct first name"\n        >\n      </div>\n    '},t.renderLastNameField=function(){return'\n      <div class="form-field">\n        <label for="lastName">Last name</label>\n        <input \n          class="input" \n          type="text" \n          id="lastName" \n          placeholder="last name" \n          maxlength="30" \n          required \n          pattern='+c.LAST_NAME_PATTERN+' \n          title="Please, type correct last name"\n        >\n      </div>\n    '},t.renderEmailField=function(){return'\n      <div class="form-field">\n        <label for="email">Email</label>\n        <input \n          class="input" \n          type="email" \n          id="email" \n          placeholder="email" \n          maxlength="30" \n          required \n          pattern='+c.EMAIL_PATTERN+'\n          title="Please, type correct email"\n        >\n      </div>\n    '},t.renderFormButtons=function(){return'\n      <div class="form-buttons">\n        <button type="submit" class="btn btn__blue" id="addUser">Add user</button>\n        <button type="reset" class="btn btn__light-blue" id="cancel">Cancel</button>\n      </div>\n    '},t}(i.BaseComponent);t.Form=l},286:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettings=void 0;var i=n(427);n(526);var a=function(e){function t(){var n=e.call(this,"div",["game-settings"])||this;return n.element.appendChild(t.renderGameCardCategory()),n.element.appendChild(t.renderGameDifficulty()),n.element.addEventListener("change",(function(e){var n=e.target;n.classList.contains("category")&&(t.settings.category=n.value),n.classList.contains("difficulty")&&(t.settings.difficulty=+n.value)})),n}return o(t,e),t.setActiveCategory=function(e){return t.settings.category===e?"selected":""},t.setActiveDifficulty=function(e){return t.settings.difficulty===e?"selected":""},t.renderGameCardCategory=function(){var e=document.createElement("div");return e.classList.add("setting"),e.innerHTML='\n      <label for="gameCards" class="setting-title">Cards category</label>\n      <select name="cards" id="category" class="category">\n        <option value="forest" '+t.setActiveCategory("forest")+'>forest</option>\n        <option value="animals" '+t.setActiveCategory("animals")+">animals</option>\n      </select>\n    ",e},t.renderGameDifficulty=function(){var e=document.createElement("div");return e.classList.add("setting"),e.innerHTML='\n      <label for="difficulty" class="setting-title">Difficulty</label>\n      <select name="difficulty" id="difficulty" class="difficulty">\n        <option value="4" '+t.setActiveDifficulty(4)+'>8 cards</option>\n        <option value="6" '+t.setActiveDifficulty(6)+'>12 cards</option>\n        <option value="8" '+t.setActiveDifficulty(8)+">16 cards</option>\n      </select>\n    ",e},t.settings={category:"animals",difficulty:4},t}(i.BaseComponent);t.GameSettings=a},229:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var s=n(427),c=n(343),l=n(610),u=n(981),p=n(59),d=n(368),f=n(81),m=n(680),y=n(678),v=function(e){function t(){var t=e.call(this)||this;return t.isAnimation=!1,t.cardsField=new l.CardsField,t.timer=new u.Timer,t.countTry=0,t.unluckyTry=0,t.element.prepend(t.timer.element),t.element.appendChild(t.cardsField.element),t}return o(t,e),t.prototype.newGame=function(e){var t=this;this.cardsField.clear(),this.timer.start();var n=e.concat(e).map((function(e){return new c.Card(e)})).sort((function(){return Math.random()-.5}));n.forEach((function(e){e.element.addEventListener("click",(function(){return t.cardHandler(e)}))})),this.cardsField.addCards(n)},t.prototype.cardHandler=function(e){return i(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this.isAnimation?[2]:e.isFlipped?(this.isAnimation=!0,[4,e.flipToFront()]):[2];case 1:return r.sent(),this.activeCard?(this.countTry++,this.activeCard.image===e.image?[3,4]:(this.setColorBgCards(e,"red-bg"),this.unluckyTry++,[4,m.delay(y.FLIP_DELAY)])):(this.activeCard=e,this.isAnimation=!1,[2]);case 2:return r.sent(),[4,Promise.all([this.activeCard.flipToBack(),e.flipToBack()])];case 3:return r.sent(),[3,5];case 4:this.setColorBgCards(e,"green-bg"),r.label=5;case 5:return this.removeRedBgCards(e),t.checkFinishGame()&&(n=this.calculateScore(),this.finishGame(),f.CongratulationsPopup.show(),p.Database.setScorePlayer(n,d.Form.currentPlayerId),p.Database.getTopPlayers()),this.activeCard=void 0,this.isAnimation=!1,[2]}}))}))},t.prototype.stopGame=function(){t.isStoppedGame=!0,this.timer.stop()},t.prototype.calculateScore=function(){var e=100*(this.countTry-this.unluckyTry)-10*u.Timer.time;return e<0?0:e},t.prototype.continueGame=function(){t.isStoppedGame=!1,this.timer.start()},t.prototype.setColorBgCards=function(e,t){if(e&&this.activeCard){var n=e.element.querySelector("."+t),r=this.activeCard.element.querySelector("."+t);n&&n.classList.add("show"),r&&r.classList.add("show")}},t.prototype.removeRedBgCards=function(e){if(e&&this.activeCard){var t=e.element.querySelector(".red-bg"),n=this.activeCard.element.querySelector(".red-bg");t&&t.classList.remove("show"),n&&n.classList.remove("show")}},t.checkFinishGame=function(){return Array.from(document.querySelectorAll(".card-container")).every((function(e){return!e.classList.contains("flipped")}))},t.prototype.finishGame=function(){this.countTry=0,this.unluckyTry=0,t.isStoppedGame=!1,this.timer.reset()},t.isStoppedGame=!1,t}(s.BaseComponent);t.Game=v},977:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var i=n(427),a=n(185),s=n(263),c=n(113);n(528);var l=function(e){function t(){var n=e.call(this,"header",["header"])||this;return n.logo=new a.Logo,n.nav=new s.Navigation,t.registerNewPlayerBtn=new c.Button("register new player","btn__white","registerNewPlayer"),t.newGameBtn=new c.Button("New Game","btn__white","newGameBtn"),t.stopGameBtn=new c.Button("Stop Game","btn__white","stopGameBtn"),n.element.appendChild(n.logo.element),n.element.appendChild(n.nav.element),n.element.appendChild(t.registerNewPlayerBtn.element),n.element.appendChild(t.newGameBtn.element),n.element.appendChild(t.stopGameBtn.element),n.element.addEventListener("click",(function(e){t.removeNavActiveLink(),t.setNavActiveLink(e.target)})),n}return o(t,e),t.removeNavActiveLink=function(){document.querySelectorAll(".nav-item").forEach((function(e){e.classList.contains("nav-item__active")&&e.classList.remove("nav-item__active")}))},t.setNavActiveLink=function(e){var t=e.closest(".nav-item");t&&t.classList.add("nav-item__active")},t.setActiveUser=function(){t.registerNewPlayerBtn.element.remove(),t.newGameBtn.element.style.display="block",t.stopGameBtn.element.style.display="block"},t.changeStopGameTextBtn=function(e){t.stopGameBtn.element.textContent=e},t}(i.BaseComponent);t.Header=l},185:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;var i=n(427);n(467);var a=function(e){function t(){return e.call(this,"div",["logo"])||this}return o(t,e),t}(i.BaseComponent);t.Logo=a},583:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;var i=n(427);n(57);var a=function(e){function t(){return e.call(this,"main")||this}return o(t,e),t}(i.BaseComponent);t.Main=a},263:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;var i=n(427);n(268);var a=function(e){function t(){var n=e.call(this,"nav")||this;return n.element.appendChild(t.renderNav()),n}return o(t,e),t.renderNav=function(){var e=document.createElement("ul");return e.classList.add("nav"),e.appendChild(t.renderNavItem("About Game","about",!0)),e.appendChild(t.renderNavItem("Best Score","score")),e.appendChild(t.renderNavItem("Game Settings","settings")),e},t.renderNavItem=function(e,t,n){var r=document.createElement("li");return r.classList.add("nav-item",n?"nav-item__active":"nav-item"),r.innerHTML='\n      <a class="nav-link" href="#'+t+'">\n        <span class="item-icon '+t+'"></span>\n        '+e+"\n      </a>\n    ",r},t}(i.BaseComponent);t.Navigation=a},957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var r=n(366),o=n(186),i=n(286),a=function(){function e(){this.routing=[{name:"about",component:function(e){var t=new r.AboutGame;e.innerHTML="",e.appendChild(t.element)}},{name:"score",component:function(e){var t=new o.BestScore;e.innerHTML="",e.appendChild(t.element)}},{name:"settings",component:function(e){var t=new i.GameSettings;e.innerHTML="",e.appendChild(t.element)}}]}return e.setDefaultRoute=function(e){var t=new r.AboutGame;e.appendChild(t.element)},e.setBestScoreRoute=function(e){var t=new o.BestScore;e.appendChild(t.element)},e.prototype.setRoute=function(e){var t=window.location.hash.slice(1);(this.routing.find((function(e){return e.name===t}))||this.routing[0]).component(e)},e}();t.Router=a},981:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=n(427),a=n(678);n(580);var s=function(e){function t(){var n=e.call(this,"div",["timer"])||this;return n.minutes=0,n.seconds=0,t.time=0,n.timerTick=!1,n.element.innerHTML="00 : 00",n}return o(t,e),t.prototype.start=function(){var e=this;this.timerTick||(this.timerTick=setInterval((function(){e.seconds++,e.seconds===a.MAX_SECONDS&&(e.minutes+=1,e.seconds=0),t.time++,e.renderTime()}),a.TIMER_TICK_INTERVAL))},t.prototype.renderTime=function(){this.element.innerHTML=(1===this.minutes.toString().length?"0".concat(this.minutes.toString()):this.minutes)+" : "+(1===this.seconds.toString().length?"0".concat(this.seconds.toString()):this.seconds)},t.prototype.stop=function(){this.timerTick&&(clearInterval(this.timerTick),this.timerTick=!1)},t.prototype.reset=function(){this.seconds=0,this.minutes=0,t.time=0,clearInterval(this.timerTick),this.timerTick=!1,this.element.innerHTML="0"+this.minutes+" : 0"+this.seconds},t}(i.BaseComponent);t.Timer=s},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((function(t){setTimeout(t,e)}))}},678:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_SECONDS=t.TIMER_TICK_INTERVAL=t.EMAIL_PATTERN=t.LAST_NAME_PATTERN=t.FIRST_NAME_PATTERN=t.DATABASE_VERSION=t.DATABASE_NAME=t.FLIP_CLASS=t.START_SHOW_TIME_CARDS=t.MAX_PLAYERS=t.FLIP_DELAY=void 0,t.FLIP_DELAY=3e3,t.MAX_PLAYERS=10,t.START_SHOW_TIME_CARDS=5e3,t.FLIP_CLASS="flipped",t.DATABASE_NAME="AndreyBaglai",t.DATABASE_VERSION=1,t.FIRST_NAME_PATTERN="[A-Za-zА-Яа-яЁё]{1,}",t.LAST_NAME_PATTERN="[A-Za-zА-Яа-яЁё]{1,}",t.EMAIL_PATTERN="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",t.TIMER_TICK_INTERVAL=1e3,t.MAX_SECONDS=60}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=o(752),t=o(59),o(387),document.addEventListener("DOMContentLoaded",(function(){t.Database.createDB()})),window.onload=function(){var t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t)}})();